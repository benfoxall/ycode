import i,{useState as s,useEffect as a}from"../web_modules/react.js";import{PickFile as f}from"./components/PickFile.js";import{Editor as r}from"./monaco.js";import c from"./yconfig.js";function d({}){const[e,l]=s(),m=async o=>{if(e){const t=await e.createWritable();await t.write(o),await t.close()}};return a(()=>{e&&e.getFile().then(o=>o.text()).then(o=>{const t=c.doc.getText("monaco:content");t.toJSON()&&t.delete(0,1e6),t.insert(0,o);const n=c.doc.getText("monaco:name");n.toJSON()&&n.delete(0,1e6),n.insert(0,e.name)})},[e]),a(()=>{document.title=e?e.name:"ycode"},[e]),c.initiator?i.createElement(f,{onFile:l,file:e},i.createElement(r,{onChange:m})):i.createElement(r,{onChange:()=>console.log("nope")})}export default d;
